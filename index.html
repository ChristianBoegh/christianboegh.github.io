<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8">
  <title>Carmens Portfolio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- CSS -->
  <link rel="stylesheet" href="style.css">
</head>

<body>

<header>
  <h1>Carmens Portfolio</h1>
</header>

<main class="frame">
  <section class="grid" id="grid" aria-label="Portfolio billeder"></section>
</main>

<script>
  const IMAGE_COUNT = 65;
  const IMAGE_DIR = "images/";
  const EXT = ".jpg";

  async function loadCaptions() {
    const res = await fetch("captions.json", { cache: "no-store" });
    if (!res.ok) throw new Error("Kunne ikke hente captions.json");
    return await res.json(); // array med tekster
  }

  function makeCard(src, captionText) {
    const fig = document.createElement("figure");
    fig.className = "polaroid";

    const photo = document.createElement("div");
    photo.className = "photo";

    const img = document.createElement("img");
    img.loading = "lazy";
    img.src = src;
    img.alt = captionText || "";

    const cap = document.createElement("figcaption");
    cap.textContent = captionText || "";

    photo.appendChild(img);
    fig.appendChild(photo);
    fig.appendChild(cap);

    return fig;
  }

  async function run() {
    let captions = [];
    try {
      captions = await loadCaptions();
    } catch (e) {
      console.warn(e);
    }

    const grid = document.getElementById("grid");

    for (let i = 1; i <= IMAGE_COUNT; i++) {
      const n = String(i).padStart(3, "0"); // 001â€“065
      const src = `${IMAGE_DIR}${n}${EXT}`;
      const text = captions[i - 1] ?? "";
      grid.appendChild(makeCard(src, text));
    }
  }

  run();
</script>

</body>
</html>
